<template>
  <div class="logo-wrapper w-80 -translate-y-10 opacity-0">
    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 284 131">
      <!-- This group contains the parts of the main "M" symbol -->
      <g class="logo-symbol">
        <!-- Shapes -->
        <path d="M59.5 57L0 11.5V38.5L59.5 85L119 38.5V11.5Z" fill="white" />
        <path d="M59.5 102.5L0 57V84L59.5 130.5L119 84V57Z" fill="white" />
        <path d="M0 102.689L35.5626 130.081H0V102.689Z" fill="white" />
        <path d="M119.21 102.312L83.6472 129.897L119.21 130.398V102.312Z" fill="white" />
      </g>
      <!-- This group contains all the text paths -->
      <g class="logo-text">
        <path
          d="M154.936 37.8945V38.2122H138V37.8945L141.705 33.343V20.376L138.106 15.2423V14.925L151.019 11.0613V16.8304H151.231C154.142 12.9135 157.264 11.1144 160.387 11.1144C163.669 11.1144 166.209 13.0724 167.003 16.8304H167.268C170.178 12.9135 173.301 11.1144 176.424 11.1144C180.393 11.1144 183.304 13.9724 183.304 19.4234V33.343L187.009 37.8945V38.2122H173.778V21.1703C173.778 18.418 172.56 17.5711 171.131 17.5711C169.967 17.5711 168.432 18.2592 167.268 19.2118V33.343L170.972 37.8945V38.2122H157.741V21.1703C157.741 18.418 156.524 17.5711 155.095 17.5711C153.93 17.5711 152.448 18.2061 151.231 19.2118V33.343L154.936 37.8945Z"
          fill="white"
        />
        <path
          d="M212.993 28.0505L213.523 28.3678C211.405 36.3595 206.748 38.8471 201.879 38.8471C193.517 38.8471 189.124 32.3373 189.124 25.1925C189.124 17.6769 193.729 11.1144 202.249 11.1144C209.235 11.1144 213.84 15.6131 213.84 23.5518H197.91C198.598 29.9027 202.038 32.0727 205.637 32.0727C208.6 32.0727 211.353 30.6439 212.993 28.0505ZM197.751 21.4349H205.372C205.107 16.3539 203.467 13.3901 201.244 13.3901C199.233 13.3901 197.751 15.56 197.751 20.9053V21.4349Z"
          fill="white"
        />
        <path
          d="M229.664 33.343L233.368 37.8945V38.2121H216.432V37.8945L220.137 33.343V19.0003L216.538 15.8246V15.5069L220.137 12.3316V9.31477L216.538 4.18105V3.86336L229.664 0V33.343Z"
          fill="white"
        />
        <path
          d="M249.298 38.8471C240.301 38.8471 235.749 32.655 235.749 25.2983C235.749 16.6715 241.942 11.1144 250.251 11.1144C259.248 11.1144 263.8 17.3065 263.8 24.6633C263.8 33.29 257.607 38.8471 249.298 38.8471ZM248.398 13.2843C246.864 13.2843 245.593 14.9777 245.593 20.8526C245.593 29.162 247.975 36.6772 251.151 36.6772C252.685 36.6772 253.955 34.9838 253.955 29.1089C253.955 20.7995 251.574 13.2843 248.398 13.2843Z"
          fill="white"
        />
        <path
          d="M160.652 57.6171V68.7314H160.07C156.577 61.5335 154.036 59.9455 152.025 59.9455C149.538 59.9455 147.738 62.38 147.738 67.1434C147.738 72.8063 150.226 77.9404 154.83 77.9404C157.635 77.9404 159.752 76.0351 161.287 73.6532L161.816 73.8651C160.335 80.3219 156.418 84.7149 150.173 84.7149C142.869 84.7149 138.794 78.6812 138.794 71.7479C138.794 63.28 144.775 57.6171 154.619 57.6171L160.652 57.6171Z"
          fill="white"
        />
        <path
          d="M178.805 84.7148C169.807 84.7148 165.256 78.5223 165.256 71.166C165.256 62.5389 171.448 56.9817 179.757 56.9817C188.755 56.9817 193.306 63.1742 193.306 70.5306C193.306 79.1577 187.114 84.7148 178.805 84.7148ZM177.905 59.1516C176.37 59.1516 175.1 60.8455 175.1 66.7199C175.1 75.0293 177.481 82.5449 180.657 82.5449C182.192 82.5449 183.462 80.8511 183.462 74.9762C183.462 66.6672 181.08 59.1516 177.905 59.1516Z"
          fill="white"
        />
        <path
          d="M195.105 60.6867L196.904 57.6172H199.868V53.5946L208.865 49.0958H209.395V57.6172H217.016V57.9345L215.217 61.0044H209.395V74.9763C209.395 77.1994 210.4 78.2578 211.935 78.2578C213.523 78.2578 215.163 77.1463 216.54 75.0825L217.069 75.3998C215.375 82.1742 211.882 84.7149 207.595 84.7149C203.308 84.7149 199.868 82.1215 199.868 76.7232V61.0044H195.105V60.6867Z"
          fill="white"
        />
        <path
          d="M232.945 84.7148C223.948 84.7148 219.396 78.5223 219.396 71.166C219.396 62.5389 225.589 56.9817 233.898 56.9817C242.895 56.9817 247.447 63.1742 247.447 70.5306C247.447 79.1577 241.254 84.7148 232.945 84.7148ZM232.045 59.1516C230.511 59.1516 229.24 60.8455 229.24 66.7199C229.24 75.0293 231.622 82.5449 234.798 82.5449C236.332 82.5449 237.602 80.8511 237.602 74.9762C237.602 66.6672 235.221 59.1516 232.045 59.1516Z"
          fill="white"
        />
        <path
          d="M266.128 83.7623V84.0796H250.251V83.7623L253.955 79.2104V66.2439L250.357 61.1101V60.7924L263.27 56.9291V62.6978H263.482C266.446 58.7283 269.674 56.9818 272.903 56.9818C277.031 56.9818 280.048 59.8398 280.048 65.2912V79.2104L283.752 83.7623V84.0796H267.875V83.7623L270.521 79.2104V67.0377C270.521 64.2854 269.145 63.4389 267.61 63.4389C266.34 63.4389 264.753 64.0208 263.482 65.0792V79.2104L266.128 83.7623Z"
          fill="white"
        />
        <path
          d="M160.652 103.485V114.599H160.07C156.577 107.401 154.036 105.813 152.025 105.813C149.538 105.813 147.738 108.248 147.738 113.011C147.738 118.674 150.226 123.808 154.83 123.808C157.635 123.808 159.752 121.903 161.287 119.521L161.816 119.733C160.335 126.19 156.418 130.583 150.173 130.583C142.869 130.583 138.794 124.549 138.794 117.616C138.794 109.148 144.775 103.485 154.619 103.485L160.652 103.485Z"
          fill="white"
        />
        <path
          d="M177.588 125.078L181.292 129.63V129.947H164.356V129.63L168.061 125.078V110.736L164.462 107.56V107.243L168.061 104.067V101.05L164.462 95.9163V95.599L177.588 91.7352V125.078Z"
          fill="white"
        />
        <path
          d="M211.829 125.078L215.534 129.63V129.947H202.515V124.867H202.303C199.392 128.783 196.269 130.583 193.147 130.583C189.177 130.583 186.266 127.725 186.266 122.273V112.112L182.667 106.978V106.66L195.793 102.85V120.527C195.793 123.279 197.01 124.126 198.439 124.126C199.603 124.126 201.085 123.491 202.303 122.485V112.112L198.704 106.978V106.66L211.829 102.849L211.829 125.078Z"
          fill="white"
        />
        <path
          d="M216.38 95.9163V95.599L229.505 91.7352V103.696L229.293 108.036H229.505C231.622 104.49 234.004 102.85 237.179 102.85C242.895 102.85 247.341 108.036 247.341 116.187C247.341 124.549 242.683 130.583 233.369 130.583C230.511 130.583 227.917 130 226.065 129.048L220.614 129.947H219.978V101.05L216.38 95.9163ZM229.505 124.39C230.563 127.196 232.363 128.519 233.951 128.519C236.279 128.519 237.602 125.872 237.602 120.527C237.602 113.699 235.433 109.201 232.204 109.201C231.251 109.201 230.299 109.624 229.505 110.471L229.505 124.39Z"
          fill="white"
        />
      </g>
    </svg>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue';
import { gsap } from 'gsap';
import { DrawSVGPlugin } from 'gsap/DrawSVGPlugin';

gsap.registerPlugin(DrawSVGPlugin);

const timeline = ref(null);

const playAnimation = () => {
  if (timeline.value) {
    timeline.value.kill();
  }

  const tl = gsap.timeline({ defaults: { ease: 'power2.inOut' } });
  timeline.value = tl;

  const symbolParts = '.logo-symbol path';
  const textParts = '.logo-text path';

  // Set the initial state of all elements
  gsap.set(symbolParts, {
    x: 80,
    stroke: 'white',
    strokeWidth: 2,
    fill: 'transparent',
    drawSVG: '0%',
  });

  gsap.set('.logo-symbol path:nth-child(1)', {
    drawSVG: '0% 0%',
  });
  gsap.set('.logo-symbol path:nth-child(2)', {
    drawSVG: '0% 0%',
  });
  gsap.set('.logo-symbol path:nth-child(3)', {
    drawSVG: '0% 0%',
  });
  gsap.set('.logo-symbol path:nth-child(4)', {
    drawSVG: '0% 0%',
  });

  gsap.set(textParts, { autoAlpha: 0, x: -20 });

  gsap.set('#opening-hours', { autoAlpha: 0, y: 10 });
  gsap.set('.logo-wrapper', { autoAlpha: 1 });

  // Draw the strokes
  tl.to('.logo-symbol path:nth-child(1)', {
    duration: 1,
    drawSVG: '100%',
  });
  tl.to(
    '.logo-symbol path:nth-child(2)',
    {
      duration: 1,
      drawSVG: '100%',
    },
    '-=0.7'
  );
  tl.to(
    '.logo-symbol path:nth-child(3)',
    {
      duration: 1,
      drawSVG: '100%',
    },
    '-=0.7'
  );
  tl.to(
    '.logo-symbol path:nth-child(4)',
    {
      duration: 1,
      drawSVG: '100%',
    },
    '-=1'
  );

  // Fill in the symbol parts
  tl.to('.logo-symbol path:nth-child(1)', {
    fill: 'white',
    stroke: 'transparent',
    duration: 0.8,
  });
  tl.to(
    '.logo-symbol path:nth-child(2)',
    {
      fill: 'white',
      stroke: 'transparent',
      duration: 0.8,
    },
    '-=0.6'
  );
  tl.to(
    '.logo-symbol path:nth-child(3)',
    {
      fill: 'white',
      stroke: 'transparent',
      duration: 0.8,
    },
    '-=0.6'
  );
  tl.to(
    '.logo-symbol path:nth-child(4)',
    {
      fill: 'white',
      stroke: 'transparent',
      duration: 0.8,
    },
    '-=0.8'
  );

  // Move to final position
  tl.to(symbolParts, {
    x: 0,
    duration: 0.8,
    ease: 'power4.inOut',
  });

  // Animate the text parts after the symbol
  tl.to(
    textParts,
    {
      duration: 0.5,
      autoAlpha: 1,
      x: 0,
      ease: 'power2.out',
      stagger: 0.02,
    },
    '-=0.4'
  );

  // Animate the opening hours, header
  tl.add('end', '-=0.5');
  tl.to(
    '#hamburger',
    {
      duration: 0.8,
      autoAlpha: 1,
      ease: 'power2.out',
    },
    'end'
  );
  tl.to(
    '#home-logo',
    {
      duration: 0.8,
      autoAlpha: 1,
      ease: 'power2.out',
    },
    'end'
  );
  tl.to(
    '#opening-hours',
    {
      duration: 0.8,
      autoAlpha: 1,
      y: 0,
      ease: 'power2.out',
    },
    'end'
  );
};

onMounted(() => {
  playAnimation();
});
</script>

<style scoped></style>
